# Информационный бот (InformationBot)

**Описание**

Информационный бот предоставляет пользователям актуальную информацию (прогноз погоды, новости и события) через Telegram. Пользователь может запрашивать данные по командам и подписываться на регулярные уведомления.

---

## Основные возможности

* Регистрация пользователей по Telegram ID
* Обработка команд:

  * `/start` — начало работы с ботом
  * `/help` — справка по доступным командам
  * `/weather` — получение текущего прогноза погоды
  * `/news` — получение последних новостей
  * `/events` — получение информации о предстоящих событиях
* Подписка на регулярные уведомления с настраиваемой частотой
* Логирование запросов пользователей

---

## Архитектура проекта

1. **Telegram-бот** на Python с использованием библиотеки `pyTelegramBotAPI`.
2. **Серверная часть** на Python для интеграции с внешними API (погода, новости, события).
3. **База данных** SQLite для хранения информации о пользователях и логов запросов.
4. **Планировщик задач** APScheduler для регулярного обновления данных и отправки подписных уведомлений.

---

## Модель данных

* **users**

  * `id` — внутренний идентификатор
  * `telegram_id` — Telegram ID пользователя
  * `name` — имя пользователя
  * `registered_at` — дата и время регистрации
  * `subscription_settings` — параметры подписки (тип и частота)

* **logs**

  * `id` — внутренний идентификатор лога
  * `user_id` — ссылка на пользователя
  * `command` — запрошенная команда или действие
  * `timestamp` — дата и время запроса

---

## Установка и настройка

1. **Клонировать репозиторий**:

   ```bash
   git clone https://github.com/ваш_пользователь/InformationBot.git
   cd InformationBot
   ```

2. **Создать виртуальное окружение и установить зависимости**:

   ```bash
   python3 -m venv venv
   source venv/bin/activate  # Linux/macOS
   venv\Scripts\activate     # Windows
   pip install -r requirements.txt
   ```

3. **Настроить переменные окружения** (создать файл `.env` в корне проекта):

   ```env
   TELEGRAM_TOKEN=ваш_токен_бота
   WEATHER_API_KEY=ключ_API_погоды
   NEWS_API_KEY=ключ_API_новостей
   EVENTS_API_KEY=ключ_API_событий
   DATABASE_URL=sqlite:///bot.db
   ```

4. **Инициализировать базу данных**:

   ```bash
   python manage.py db init
   python manage.py db migrate
   python manage.py db upgrade
   ```

5. **Запустить бота**:

   ```bash
   python bot.py
   ```

---

## Примеры использования

* Получить прогноз погоды:

  ```
  /weather Moscow
  ```

* Получить последние новости:

  ```
  /news
  ```

* Подписаться на ежедневные уведомления о событиях:

  ```
  /subscribe events daily
  ```

---

## Тестирование

* **Юнит-тесты** для модулей бота и серверной части
* **Интеграционные тесты** для проверки взаимодействия с внешними API
* **Тестирование планировщика** APScheduler

Запуск тестов:

```bash
pytest tests/
```

---

## План разработки

Проект рассчитан на 14 дней:

1. **Этап 1 (Дни 1–3)**: анализ требований, настройка репозитория, проектирование архитектуры
2. **Этап 2 (Дни 4–8)**: реализация основных команд и интеграции с API
3. **Этап 3 (Дни 9–11)**: объединение компонентов, отладка, тестирование
4. **Этап 4 (Дни 12–14)**: финальная проверка, исправление ошибок, деплой

---

## Лицензия

Проект распространяется под MIT License.
